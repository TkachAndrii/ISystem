# InfoSystem CRM: Microservices Architecture with Monitoring

Цей репозиторій містить вихідний код розподіленої CRM-системи, побудованої на основі мікросервісної архітектури. Проєкт демонструє взаємодію між сервісами, використання різних типів баз даних, контейнеризацію та налаштування повного циклу моніторингу метрик.

## Опис системи

Система складається з ізольованих компонентів, розгорнутих у Docker-середовищі. Реалізовано механізми Service-to-Service (S2S) комунікації, де CRM-система делегує перевірку автентичності окремому сервісу авторизації. Для тестування продуктивності та стабільності в архітектуру інтегровано генератор синтетичного навантаження.

## Функціональні можливості

* **Мікросервісна архітектура:** Розділення логіки на незалежні сервіси (Auth, CRM) з HTTP-взаємодією.
* **Контейнеризація:** Повна ізоляція середовища виконання за допомогою Docker та оркестрація через Docker Compose.
* **Поліглотна персистентність:**
    * **SQLite:** Використовується сервісом авторизації для зберігання облікових записів та сесій.
    * **MongoDB:** Використовується CRM-сервісом для зберігання даних про замовлення.
* **Телеметрія та моніторинг:** Збір технічних та бізнес-метрик (RPS, Latency, Active Sessions, DB Stats) через Prometheus.
* **Візуалізація даних:** Інтеграція з Grafana для відображення стану системи в реальному часі.
* **Інтерфейс користувача:** Реалізовано веб-інтерфейс із використанням Bootstrap 5 (Dark Mode).
* **Навантажувальне тестування:** Автоматизований скрипт (`db_stresser`) для імітації активності користувачів.

## Технологічний стек

| Компонент | Технології | Призначення |
| :--- | :--- | :--- |
| **Auth Service** | Python, Flask, SQLite | Управління ідентифікацією, валідація токенів. |
| **CRM Service** | Python, Flask, MongoDB | Управління бізнес-сутностями (замовленнями). |
| **Frontend** | HTML5, CSS3, Bootstrap 5 | Клієнтська частина додатка. |
| **Monitoring** | Prometheus, Grafana | Збір метрик та побудова дашбордів. |
| **Infrastructure** | Docker, Docker Compose | Розгортання та управління контейнерами. |

## Структура проєкту

```text
.
├── compose/                 # Конфігураційні файли інфраструктури
│   ├── prometheus/          # Налаштування збору метрик (prometheus.yml)
│   └── grafana/             # Експортовані дашборди та налаштування
├── src/
│   ├── auth_service/        # Вихідний код сервісу авторизації
│   ├── crm_service/         # Вихідний код CRM-системи
│   └── db_stresser/         # Модуль генерації навантаження
├── docker-compose.yml       # Маніфест оркестрації контейнерів
└── README.md                # Технічна документація
Інструкція з розгортанняДля запуску проєкту необхідно мати встановлені Docker Engine та Docker Compose.1. Клонування репозиторіюBashgit clone <URL-репозиторію>
cd <папка-проєкту>
2. Запуск контейнерівВиконайте команду для збірки образів та запуску сервісів у фоновому режимі. Прапор --build гарантує використання актуальної версії коду.Bashdocker-compose up --build -d
3. Перевірка статусуПереконайтеся, що всі контейнери перейшли у статус Running або Healthy.Bashdocker ps
Кінцеві точки доступу (Endpoints)Після успішного запуску компоненти системи доступні за наступними адресами:СервісURLОписCRM Dashboardhttp://localhost:5001Панель управління замовленнями.Auth Servicehttp://localhost:5000Інтерфейс входу та реєстрації.Grafanahttp://localhost:3000Система візуалізації (Login/Pass: admin).Prometheushttp://localhost:9090Інтерфейс перегляду "сирих" метрик.Налаштування моніторингуСистема постачається з двома шаблонами дашбордів для Grafana. У разі відсутності даних на графіках необхідно налаштувати джерело даних (Data Source).Увійдіть у веб-інтерфейс Grafana (localhost:3000).Перейдіть у меню Connections -> Data Sources.Оберіть або створіть нове джерело типу Prometheus.У полі Prometheus server URL вкажіть внутрішню адресу в мережі Docker:Plaintexthttp://prometheus:9090
Натисніть Save & Test для перевірки з'єднання.Доступні метрикиAuth Service: Кількість запитів (RPS), статистика входів/помилок, час відгуку (Latency), активні сесії.MongoDB: Час безвідмовної роботи (Uptime), пропускна здатність операцій, обсяг даних.Вирішення типових проблемПроблема підключення до БД при стартіЯкщо CRM-сервіс повідомляє про помилку з'єднання з MongoDB одразу після запуску, це пов'язано з тривалішою ініціалізацією бази даних.Рішення: Перезапустіть сервіс CRM:Bashdocker-compose restart crm_service
Оновлення коду не застосовуєтьсяDocker може використовувати закешовані шари образів.Рішення: Виконайте примусову перезбірку без кешу:Bashdocker-compose build --no-cache
docker-compose up -d
Помилка Datasource ID в GrafanaПісля імпорту дашбордів графіки можуть відображати помилку "Datasource not found".Рішення: У режимі редагування панелі (Edit) змініть поле Data source на актуальний Prometheus.
